rm -rf  build/.filecoin-install build/.update-modules  lotus lotus-miner lotus-worker lotus-shed lotus-gateway lotus-seed lotus-pond lotus-townhall lotus-fountain lotus-chainwatch lotus-bench lotus-stats lotus-pcr lotus-health lotus-wallet lotus-keygen testground tvx
make -C extern/filecoin-ffi/ clean
make[1]: Entering directory '/root/lzj/lotus/extern/filecoin-ffi'
make[1]: *** No rule to make target 'clean'.  Stop.
make[1]: Leaving directory '/root/lzj/lotus/extern/filecoin-ffi'
make: [Makefile:320: clean] Error 2 (ignored)
git submodule update --init --recursive
Cloning into '/root/lzj/lotus/extern/filecoin-ffi'...
Cloning into '/root/lzj/lotus/extern/serialization-vectors'...
Cloning into '/root/lzj/lotus/extern/test-vectors'...
Submodule path 'extern/filecoin-ffi': checked out 'd60fc680aa8abeafba698f738fed5b94c9bda33d'
Submodule path 'extern/serialization-vectors': checked out '5bfb928910b01ac8b940a693af2884f7f8276211'
Submodule path 'extern/test-vectors': checked out 'd9a75a7873aee0db28b87e3970d2ea16a2f37c6a'
Submodule 'gen/extern/fil-blst' (https://github.com/filecoin-project/fil-blst.git) registered for path 'extern/test-vectors/gen/extern/fil-blst'
Submodule 'gen/extern/filecoin-ffi' (https://github.com/filecoin-project/filecoin-ffi.git) registered for path 'extern/test-vectors/gen/extern/filecoin-ffi'
Cloning into '/root/lzj/lotus/extern/test-vectors/gen/extern/fil-blst'...
Cloning into '/root/lzj/lotus/extern/test-vectors/gen/extern/filecoin-ffi'...
Submodule path 'extern/test-vectors/gen/extern/fil-blst': checked out '5f93488fc0dbfb450f2355269f18fc67010d59bb'
Submodule path 'extern/test-vectors/gen/extern/filecoin-ffi': checked out 'f640612a1a1f7a2dd8b3a49e1531db0aa0f63447'
touch build/.update-modules
make -C extern/filecoin-ffi/ .install-filcrypto
make[1]: Entering directory '/root/lzj/lotus/extern/filecoin-ffi'
go clean -cache -testcache .
./install-filcrypto
+ auth_header=()
+ '[' -n '' ']'
++ dirname ./install-filcrypto
+ cd .
+ rust_sources_dir=rust
++ jq -r '.[].check_cpu_for_feature | select(. != null)'
+ cpu_features_required_for_optimized_release='adx
sha_ni
sha2
sse2
avx2
avx
sse4_2
sse4_1'
+ main
++ get_release_flags
++ local __features=
++ [[ ! -f /proc/cpuinfo ]]
+++ uname -a
+++ grep x86_64
++ x86_64_uname='Linux AMD-miner-0-251 5.4.0-62-generic #70-Ubuntu SMP Tue Jan 12 12:45:47 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux'
++ '[' -n 'Linux AMD-miner-0-251 5.4.0-62-generic #70-Ubuntu SMP Tue Jan 12 12:45:47 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux' ']'
+++ cat /proc/cpuinfo
+++ grep flags
+++ head -n 1
++ __features='flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
++ feature_map=("adx:+adx" "sha_ni:+sha" "sha2:+sha2" "sse2:+sse2" "avx2:+avx2" "avx:+avx" "sse4_2:+sse4.2" "sse4_1:+sse4.1")
++ target_features=
++ for x in ${cpu_features_required_for_optimized_release[@]}
+++ echo 'flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
+++ grep -c adx
++ current_feature=1
++ '[' 1 = 1 ']'
++ for feature in "${feature_map[@]}"
++ key=adx
++ '[' adx == adx ']'
++ val=+adx
++ '[' -z '' ']'
++ target_features=+adx
++ for feature in "${feature_map[@]}"
++ key=sha_ni
++ '[' sha_ni == adx ']'
++ for feature in "${feature_map[@]}"
++ key=sha2
++ '[' sha2 == adx ']'
++ for feature in "${feature_map[@]}"
++ key=sse2
++ '[' sse2 == adx ']'
++ for feature in "${feature_map[@]}"
++ key=avx2
++ '[' avx2 == adx ']'
++ for feature in "${feature_map[@]}"
++ key=avx
++ '[' avx == adx ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_2
++ '[' sse4_2 == adx ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_1
++ '[' sse4_1 == adx ']'
++ for x in ${cpu_features_required_for_optimized_release[@]}
+++ echo 'flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
+++ grep -c sha_ni
++ current_feature=1
++ '[' 1 = 1 ']'
++ for feature in "${feature_map[@]}"
++ key=adx
++ '[' adx == sha_ni ']'
++ for feature in "${feature_map[@]}"
++ key=sha_ni
++ '[' sha_ni == sha_ni ']'
++ val=+sha
++ '[' -z +adx ']'
++ target_features=+adx,+sha
++ for feature in "${feature_map[@]}"
++ key=sha2
++ '[' sha2 == sha_ni ']'
++ for feature in "${feature_map[@]}"
++ key=sse2
++ '[' sse2 == sha_ni ']'
++ for feature in "${feature_map[@]}"
++ key=avx2
++ '[' avx2 == sha_ni ']'
++ for feature in "${feature_map[@]}"
++ key=avx
++ '[' avx == sha_ni ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_2
++ '[' sse4_2 == sha_ni ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_1
++ '[' sse4_1 == sha_ni ']'
++ for x in ${cpu_features_required_for_optimized_release[@]}
+++ echo 'flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
+++ grep -c sha2
++ current_feature=0
++ '[' 1 = 0 ']'
++ for x in ${cpu_features_required_for_optimized_release[@]}
+++ echo 'flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
+++ grep -c sse2
++ current_feature=1
++ '[' 1 = 1 ']'
++ for feature in "${feature_map[@]}"
++ key=adx
++ '[' adx == sse2 ']'
++ for feature in "${feature_map[@]}"
++ key=sha_ni
++ '[' sha_ni == sse2 ']'
++ for feature in "${feature_map[@]}"
++ key=sha2
++ '[' sha2 == sse2 ']'
++ for feature in "${feature_map[@]}"
++ key=sse2
++ '[' sse2 == sse2 ']'
++ val=+sse2
++ '[' -z +adx,+sha ']'
++ target_features=+adx,+sha,+sse2
++ for feature in "${feature_map[@]}"
++ key=avx2
++ '[' avx2 == sse2 ']'
++ for feature in "${feature_map[@]}"
++ key=avx
++ '[' avx == sse2 ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_2
++ '[' sse4_2 == sse2 ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_1
++ '[' sse4_1 == sse2 ']'
++ for x in ${cpu_features_required_for_optimized_release[@]}
+++ echo 'flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
+++ grep -c avx2
++ current_feature=1
++ '[' 1 = 1 ']'
++ for feature in "${feature_map[@]}"
++ key=adx
++ '[' adx == avx2 ']'
++ for feature in "${feature_map[@]}"
++ key=sha_ni
++ '[' sha_ni == avx2 ']'
++ for feature in "${feature_map[@]}"
++ key=sha2
++ '[' sha2 == avx2 ']'
++ for feature in "${feature_map[@]}"
++ key=sse2
++ '[' sse2 == avx2 ']'
++ for feature in "${feature_map[@]}"
++ key=avx2
++ '[' avx2 == avx2 ']'
++ val=+avx2
++ '[' -z +adx,+sha,+sse2 ']'
++ target_features=+adx,+sha,+sse2,+avx2
++ for feature in "${feature_map[@]}"
++ key=avx
++ '[' avx == avx2 ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_2
++ '[' sse4_2 == avx2 ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_1
++ '[' sse4_1 == avx2 ']'
++ for x in ${cpu_features_required_for_optimized_release[@]}
+++ echo 'flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
+++ grep -c avx
++ current_feature=1
++ '[' 1 = 1 ']'
++ for feature in "${feature_map[@]}"
++ key=adx
++ '[' adx == avx ']'
++ for feature in "${feature_map[@]}"
++ key=sha_ni
++ '[' sha_ni == avx ']'
++ for feature in "${feature_map[@]}"
++ key=sha2
++ '[' sha2 == avx ']'
++ for feature in "${feature_map[@]}"
++ key=sse2
++ '[' sse2 == avx ']'
++ for feature in "${feature_map[@]}"
++ key=avx2
++ '[' avx2 == avx ']'
++ for feature in "${feature_map[@]}"
++ key=avx
++ '[' avx == avx ']'
++ val=+avx
++ '[' -z +adx,+sha,+sse2,+avx2 ']'
++ target_features=+adx,+sha,+sse2,+avx2,+avx
++ for feature in "${feature_map[@]}"
++ key=sse4_2
++ '[' sse4_2 == avx ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_1
++ '[' sse4_1 == avx ']'
++ for x in ${cpu_features_required_for_optimized_release[@]}
+++ echo 'flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
+++ grep -c sse4_2
++ current_feature=1
++ '[' 1 = 1 ']'
++ for feature in "${feature_map[@]}"
++ key=adx
++ '[' adx == sse4_2 ']'
++ for feature in "${feature_map[@]}"
++ key=sha_ni
++ '[' sha_ni == sse4_2 ']'
++ for feature in "${feature_map[@]}"
++ key=sha2
++ '[' sha2 == sse4_2 ']'
++ for feature in "${feature_map[@]}"
++ key=sse2
++ '[' sse2 == sse4_2 ']'
++ for feature in "${feature_map[@]}"
++ key=avx2
++ '[' avx2 == sse4_2 ']'
++ for feature in "${feature_map[@]}"
++ key=avx
++ '[' avx == sse4_2 ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_2
++ '[' sse4_2 == sse4_2 ']'
++ val=+sse4.2
++ '[' -z +adx,+sha,+sse2,+avx2,+avx ']'
++ target_features=+adx,+sha,+sse2,+avx2,+avx,+sse4.2
++ for feature in "${feature_map[@]}"
++ key=sse4_1
++ '[' sse4_1 == sse4_2 ']'
++ for x in ${cpu_features_required_for_optimized_release[@]}
+++ echo 'flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate sme ssbd mba sev ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif umip rdpid overflow_recov succor smca'
+++ grep -c sse4_1
++ current_feature=1
++ '[' 1 = 1 ']'
++ for feature in "${feature_map[@]}"
++ key=adx
++ '[' adx == sse4_1 ']'
++ for feature in "${feature_map[@]}"
++ key=sha_ni
++ '[' sha_ni == sse4_1 ']'
++ for feature in "${feature_map[@]}"
++ key=sha2
++ '[' sha2 == sse4_1 ']'
++ for feature in "${feature_map[@]}"
++ key=sse2
++ '[' sse2 == sse4_1 ']'
++ for feature in "${feature_map[@]}"
++ key=avx2
++ '[' avx2 == sse4_1 ']'
++ for feature in "${feature_map[@]}"
++ key=avx
++ '[' avx == sse4_1 ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_2
++ '[' sse4_2 == sse4_1 ']'
++ for feature in "${feature_map[@]}"
++ key=sse4_1
++ '[' sse4_1 == sse4_1 ']'
++ val=+sse4.1
++ '[' -z +adx,+sha,+sse2,+avx2,+avx,+sse4.2 ']'
++ target_features=+adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1
++ echo +adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1
+ local __release_flags=+adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1
+ '[' 1 '!=' 1 ']'
+ echo '[install-filcrypto/main] building libfilcrypto from local sources (dir = rust)'
[install-filcrypto/main] building libfilcrypto from local sources (dir = rust)
+ build_from_source filcrypto rust +adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1
+ local __library_name=filcrypto
+ local __rust_sources_path=rust
+ local __release_flags=+adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1
++ git rev-parse HEAD
+ local __repo_sha1=d60fc680aa8abeafba698f738fed5b94c9bda33d
+ local __repo_sha1_truncated=d60fc680aa8abeaf
+ echo 'building from source @ d60fc680aa8abeaf'
building from source @ d60fc680aa8abeaf
++ command -v cargo
+ '[' -x /root/.cargo/bin/cargo ']'
++ command -v rustup
+ '[' -x /root/.cargo/bin/rustup ']'
+ pushd rust
~/lzj/lotus/extern/filecoin-ffi/rust ~/lzj/lotus/extern/filecoin-ffi
+ cargo --version
cargo 1.53.0-nightly (65d57e6f3 2021-04-04)
+ gpu_flags=,gpu
+ '[' '' == 0 ']'
+ use_multicore_sdr='--features multicore-sdr'
+ '[' '' == 0 ']'
+ '[' '' == 1 ']'
+ '[' '' == 1 ']'
+ additional_flags='--no-default-features --features multicore-sdr --features pairing,gpu'
+ '[' -n +adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1 ']'
++ cat rust-toolchain
+ RUSTFLAGS='-C target-feature=+adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1'
+ ./scripts/build-release.sh filcrypto nightly-2021-04-24 '--no-default-features --features multicore-sdr --features pairing,gpu'
+ main filcrypto nightly-2021-04-24 '--no-default-features --features multicore-sdr --features pairing,gpu'
+ [[ -z filcrypto ]]
+ [[ -z nightly-2021-04-24 ]]
++ mktemp
+ __build_output_log_tmp=/tmp/tmp.XiBWW6UDqG
+ trap '{ rm -f $__build_output_log_tmp; }' EXIT
+ local '__rust_flags=--print native-static-libs -C target-feature=+adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1'
+ RUSTFLAGS='--print native-static-libs -C target-feature=+adx,+sha,+sse2,+avx2,+avx,+sse4.2,+sse4.1'
+ cargo +nightly-2021-04-24 build --release --no-default-features --features multicore-sdr --features pairing,gpu
+ tee /tmp/tmp.XiBWW6UDqG
   Compiling autocfg v1.0.1
   Compiling libc v0.2.97
   Compiling cfg-if v1.0.0
   Compiling proc-macro2 v1.0.27
   Compiling unicode-xid v0.2.2
   Compiling syn v1.0.73
   Compiling lazy_static v1.4.0
   Compiling cc v1.0.68
   Compiling typenum v1.13.0
   Compiling serde_derive v1.0.126
   Compiling serde v1.0.126
   Compiling version_check v0.9.3
   Compiling bitflags v1.2.1
   Compiling memchr v2.4.0
   Compiling getrandom v0.1.16
   Compiling scopeguard v1.1.0
   Compiling log v0.4.14
   Compiling ppv-lite86 v0.2.10
   Compiling byteorder v1.4.3
   Compiling cfg-if v0.1.10
   Compiling crossbeam-utils v0.8.5
   Compiling maybe-uninit v2.0.0
   Compiling rustc-serialize v0.3.24
   Compiling ucd-trie v0.1.3
   Compiling ryu v1.0.5
   Compiling crossbeam-epoch v0.9.5
   Compiling gimli v0.24.0
   Compiling adler v1.0.2
   Compiling either v1.6.1
   Compiling arrayvec v0.5.2
   Compiling failure_derive v0.1.8
   Compiling rayon-core v1.9.1
   Compiling cl-sys v0.4.2
   Compiling rustc-demangle v0.1.19
   Compiling opaque-debug v0.3.0
   Compiling arrayref v0.3.6
   Compiling subtle v2.4.0
   Compiling byte-tools v0.3.1
   Compiling futures v0.1.31
   Compiling constant_time_eq v0.1.5
   Compiling fake-simd v0.1.2
   Compiling serde_json v1.0.64
   Compiling opaque-debug v0.2.3
   Compiling nodrop v0.1.14
   Compiling cpufeatures v0.1.4
   Compiling anyhow v1.0.41
   Compiling rustc-hash v1.1.0
   Compiling lexical-core v0.7.6
   Compiling remove_dir_all v0.5.3
   Compiling bit-vec v0.6.3
   Compiling byteorder v0.5.3
   Compiling static_assertions v1.1.0
   Compiling crossbeam-queue v0.3.2
   Compiling hex v0.4.3
   Compiling byte-slice-cast v1.0.0
   Compiling itoa v0.4.7
   Compiling block-padding v0.2.1
   Compiling pkg-config v0.3.19
   Compiling proc-macro2 v0.4.30
   Compiling unicode-width v0.1.8
   Compiling regex-syntax v0.6.25
   Compiling glob v0.3.0
   Compiling unicode-xid v0.1.0
   Compiling bitflags v0.4.0
   Compiling cbindgen v0.14.0
   Compiling ansi_term v0.11.0
   Compiling syn v0.15.44
   Compiling difference v2.0.0
   Compiling strsim v0.8.0
   Compiling cpuid-bool v0.1.2
   Compiling yansi v0.5.0
   Compiling vec_map v0.8.2
   Compiling radium v0.3.0
   Compiling filepath v0.1.1
   Compiling pest v2.1.3
   Compiling itertools v0.8.2
   Compiling itertools v0.9.0
   Compiling block-padding v0.1.5
   Compiling blake2b_simd v0.5.11
   Compiling blake2s_simd v0.5.11
   Compiling generic-array v0.14.4
   Compiling nom v5.1.2
   Compiling num-traits v0.2.14
   Compiling num-integer v0.1.44
   Compiling num-bigint v0.2.6
   Compiling crossbeam-utils v0.7.2
   Compiling memoffset v0.5.6
   Compiling num-iter v0.1.42
   Compiling memoffset v0.6.4
   Compiling miniz_oxide v0.4.4
   Compiling crossbeam-epoch v0.8.2
   Compiling rayon v1.5.1
   Compiling textwrap v0.11.0
   Compiling pretty_assertions v0.6.1
   Compiling bitvec v0.17.4
   Compiling hwloc v0.3.0
   Compiling fff v0.3.1
   Compiling backtrace v0.3.60
   Compiling sha2-asm v0.6.1
   Compiling blst v0.3.3
   Compiling crossbeam-channel v0.5.1
   Compiling object v0.25.3
   Compiling aho-corasick v0.7.18
   Compiling semver-parser v0.10.2
   Compiling quote v1.0.9
   Compiling rand v0.4.6
   Compiling num_cpus v1.13.0
   Compiling getrandom v0.2.3
   Compiling dirs-sys v0.3.6
   Compiling memmap v0.7.0
   Compiling fs2 v0.4.3
   Compiling positioned-io v0.2.2
   Compiling time v0.1.43
   Compiling errno v0.1.8
   Compiling mapr v0.8.0
   Compiling fdlimit v0.2.1
   Compiling atty v0.2.14
   Compiling quote v0.6.13
   Compiling rand_core v0.5.1
   Compiling addr2line v0.15.2
   Compiling threadpool v1.8.1
   Compiling dirs v2.0.2
   Compiling rand_core v0.6.3
   Compiling semver v0.11.0
   Compiling generic-array v0.12.4
   Compiling regex v1.5.4
   Compiling tempdir v0.3.7
   Compiling clap v2.33.3
   Compiling rand_chacha v0.2.2
   Compiling rand_xorshift v0.2.0
   Compiling num-complex v0.1.43
   Compiling num-traits v0.1.43
   Compiling rand_chacha v0.3.1
   Compiling rustc_version v0.3.3
   Compiling crossbeam-channel v0.4.4
   Compiling crossbeam-queue v0.2.3
   Compiling digest v0.8.1
   Compiling block-buffer v0.7.3
   Compiling digest v0.9.0
   Compiling crypto-mac v0.10.0
   Compiling block-buffer v0.9.0
   Compiling cipher v0.2.5
   Compiling crossbeam-deque v0.8.0
   Compiling rand v0.7.3
   Compiling enum_primitive v0.1.1
   Compiling num-bigint v0.1.44
   Compiling chrono v0.4.19
   Compiling rand v0.8.4
   Compiling crossbeam-deque v0.7.3
   Compiling sha2 v0.8.2
   Compiling hmac v0.10.1
   Compiling fil-ocl-core v0.11.4
   Compiling sha2 v0.9.5
   Compiling sha2raw v3.0.2
   Compiling aes-soft v0.6.4
   Compiling block-modes v0.7.0
   Compiling crossbeam v0.8.1
   Compiling hkdf v0.10.0
   Compiling crossbeam v0.7.3
   Compiling aes v0.6.0
   Compiling qutex v0.2.3
   Compiling num-rational v0.1.42
   Compiling tempfile v3.2.0
   Compiling flexi_logger v0.14.8
   Compiling num v0.1.42
   Compiling ocl-core-vector v0.1.0
   Compiling fil_logger v0.1.2
   Compiling synstructure v0.12.4
   Compiling drop_struct_macro_derive v0.5.0
   Compiling ffi-toolkit v0.5.0
   Compiling thiserror-impl v1.0.25
   Compiling fff_derive v0.3.0
   Compiling zeroize_derive v1.1.0
   Compiling zeroize v1.3.0
   Compiling failure v0.1.8
   Compiling thiserror v1.0.25
   Compiling fil-ocl v0.19.6
   Compiling rust-gpu-tools v0.3.0
   Compiling toml v0.5.8
   Compiling bincode v1.3.3
   Compiling merkletree v0.21.0
   Compiling groupy v0.4.1
   Compiling ff-cl-gen v0.3.0
   Compiling paired v0.22.0
   Compiling blstrs v0.3.0
   Compiling config v0.10.1
   Compiling bls-signatures v0.10.0
   Compiling bellperson v0.14.2
   Compiling neptune v3.0.0
   Compiling fr32 v1.0.2
   Compiling filecoin-hashers v3.0.2
   Compiling filcrypto v0.7.5 (/root/lzj/lotus/extern/filecoin-ffi/rust)
   Compiling storage-proofs-core v8.0.2
   Compiling storage-proofs-porep v8.0.2
   Compiling storage-proofs-post v8.0.2
   Compiling filecoin-proofs v8.0.2
   Compiling filecoin-proofs-api v8.0.1
note: Link against the following native artifacts when linking against this static library. The order and any duplication can be significant on some platforms.

note: native-static-libs: -lhwloc -lOpenCL -lOpenCL -lgcc_s -lutil -lrt -lpthread -lm -ldl -lc

    Finished release [optimized] target(s) in 1m 37s
++ cat /tmp/tmp.XiBWW6UDqG
++ grep native-static-libs:
++ head -n 1
++ cut -d : -f 3
+ local '__linker_flags= -lhwloc -lOpenCL -lOpenCL -lgcc_s -lutil -lrt -lpthread -lm -ldl -lc'
++ git rev-parse HEAD
+ sed -e 's;@VERSION@;d60fc680aa8abeafba698f738fed5b94c9bda33d;' -e 's;@PRIVATE_LIBS@; -lhwloc -lOpenCL -lOpenCL -lgcc_s -lutil -lrt -lpthread -lm -ldl -lc;' filcrypto.pc.template
+ find -L . -type f -name filcrypto.h
+ read
+ find -L . -type f -name libfilcrypto.a
+ read
+ exit
+ rm -f /tmp/tmp.XiBWW6UDqG
+ popd
~/lzj/lotus/extern/filecoin-ffi
+ find -L rust/target/release -type f -name filcrypto.h -exec cp -- '{}' . ';'
+ find -L rust/target/release -type f -name libfilcrypto.a -exec cp -- '{}' . ';'
+ find -L rust -type f -name filcrypto.pc -exec cp -- '{}' . ';'
+ check_installed_files
+ [[ ! -f ./filcrypto.h ]]
+ [[ ! -f ./libfilcrypto.a ]]
+ [[ ! -f ./filcrypto.pc ]]
+ echo '[install-filcrypto/main] successfully built and installed libfilcrypto from source'
[install-filcrypto/main] successfully built and installed libfilcrypto from source
+ exit
make[1]: Leaving directory '/root/lzj/lotus/extern/filecoin-ffi'
rm -f lotus
go build  -ldflags="-X=github.com/filecoin-project/lotus/build.CurrentCommit=+git.764fa9dae" -o lotus ./cmd/lotus
go run github.com/GeertJohan/go.rice/rice append --exec lotus -i ./build
rm -f lotus-miner
go build  -ldflags="-X=github.com/filecoin-project/lotus/build.CurrentCommit=+git.764fa9dae" -o lotus-miner ./cmd/lotus-storage-miner
go run github.com/GeertJohan/go.rice/rice append --exec lotus-miner -i ./build
rm -f lotus-worker
go build  -ldflags="-X=github.com/filecoin-project/lotus/build.CurrentCommit=+git.764fa9dae" -o lotus-worker ./cmd/lotus-seal-worker
go run github.com/GeertJohan/go.rice/rice append --exec lotus-worker -i ./build
Caution: you have an existing lotus binary in your PATH. This may cause problems if you don't run 'sudo make install'
